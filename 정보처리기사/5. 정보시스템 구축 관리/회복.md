# 🌟 회복 (Recovery)

- 트랜잭션들을 수행하는 도중 장애가 발생하여 데이터베이스가 손상되었을 때 손상되기 이전의 정상 상태로 복구하는 작업

### 회복 기법

> **연기 갱신 기법(Deferred Update)**

- 트랜잭션이 **성공적으로 완료될 때까지** 데이터베이스에 대한 실질적인 갱신을 연기하는 방법
- 트랜잭션이 수행되는 동안 갱신된 내용은 일단 Log에 보관됨
- 트랜잭션의 부분 완료(성공적인 완료 직전) 시점에 Log에 보관한 갱신 내용을 실제 데이터베이스에 기록함
- 트랜잭션이 부분 완료되기 전에 장애가 발생하여 트랜잭션이 Rollback되면 트랜잭션이 실제데이터베이스에 영향을 미치지 않았기 때문에 어떠한 갱신 내용도 취소(Undo)시킬 필요 없이 무시하면 됨
- Redo 작업만 가능함

> **즉각 갱신 기법(Immediate Update)**

- 트랜잭션이 데이터를 갱신하면 **트랜잭션이 부분 완료되기 전이라도 즉시** 실제 데이터베이스에 반영하는 방법
- 장애가 발생하여 회복 작업할 경우를 대비하여 갱신된 내용들은 Log에 보관시킴
- 회복 작업을 할 경우에는 Redo와 Undo 모두 사용 가능함

> **그림자 페이지 대체 기법(Shadow Paging)**

- 갱신 이전의 데이터베이스를 일정 크기의 페이지 단위로 구성하여 각 페이지마다 복사본인 **그림자 페이지로 별도 보관**해 놓고, 실제 페이지를 대상으로 트랜잭션에 의한 갱신 작업을 하다가 장애가 발생하여 트랜잭션 작업을 Rollback 시킬 때, 갱신된 이후의 실제 페이지 부분에 그림자 페이지를 대체하여 회복시키는 기법
- 로그, Undo 및 Redo 알고리즘이 필요 없음

> **검사점 기법(Check Point)**

- 트랜잭션 실행 중 특정 단계에서 재실행할 수 있도록 갱신 내용이나 시스템에 대한 상황 등에 관한 정보와 함께 **검사점을 로그에 보관**해 두고, 장애 발생 시 트랜잭션 전체를 철회하지 않고 검사점부터 회복 작업을 하여 회복시간을 절약하도록하는 기법
