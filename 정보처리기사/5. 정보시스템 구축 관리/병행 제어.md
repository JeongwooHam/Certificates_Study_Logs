# 🌟 병행 제어

- 다중 프로그램의 이점을 활용하여 동시에 여러 개의 트랜잭션을 병행수행할 때, 동시에 실행되는 트랜잭션들이 데이터베이스의 일관성을 파괴하지 않도록 트랜잭션 간의 상호 작용을 제어하는 것

### 병행 제어 기법의 종류

> **로킹 (Locking)**

- 주요 데이터의 액세스를 상호 배타적으로 하는 것
- 트랜잭션들이 어떤 로킹 단위를 액세스하기 전에 Lock(잠금)을 요청해서 Lock이 허락되어야만 그 로킹 단위를 액세스할 수 있도록 하는 기법
- 같은 자원에 접근하는 다중 트랜잭션 환경에서 DB의 일관성과 무결성을 유지하기 위해 트랜잭션의 순차적 진행을 보장하는 직렬화 기법
- DB, 파일, 레코드 등은 로킹 단위가 될 수 있다.
- **_로킹 단위_**: 한 번에 로킹할 수 있는 객체의 크기
- 로킹 단위가 **작아지면**
  - 로크의 수가 증가한다.
  - DB 베이스 공유가 증가한다.
  - 로킹 오버헤드가 증가한다.
  - 병행성 수준이 높아진다.
  - 병행 제어 기법이 복잡해진다.
- 로킹 단위가 **커지면**
  - 로크의 수가 적어진다.
  - 병행성 수준이 낮아진다.
  - 병행 제어 기법이 간단해진다.

> **Time Stamp Ordering**

- 직렬성 순서를 결정하기 위해 트랜잭션 간의 처리 순서를 미리 선택하는 기법들 중에서 가장 보편적인 방법
- 트랜잭션과 트랜잭션이 읽거나 갱신한 데이터에 대해 트랜잭션이 실행을 시작하기 전에 시간표(Time Stamp)를 부여하여 부여된 시간에 따라 트랜잭션 작업을 수행하여 트랜잭션 간의 처리 순서를 미리 정하는 기법
- 교착상태가 발생하지 않음

> **최적 병행 수행**

- 검증 기법, 확인 기법, 낙관적 기법
- 병행수행하고자 하는 대부분의 트랜잭션이 판독 전용(Read Only) 트랜잭션일 경우, 트랜잭션 간의 충돌률이 매우 낮아서 병행제어 기법을 사용하지 않고 실행되어도 이 중의 많은 트랜잭션은 시스템의 상태를 일관성 있게 유지한다는 점을 이용한 기법

> **다중 버전 기법**

- = 다중버전 타임 스탬프 기법
- 타임 스탬프의 개념을 이용하는 기법
- 타임 스탬프 기법은 트랜잭션 및 데이터들이 이용될 때의 시간을 시간표로 관리한다.
  - 다중 버전 기법은 갱신될 때마다의 버전을 부여하여 관리한다.

### 로킹 단위

- Locking Granularity
- 병행제어에서 한꺼번에 로킹할 수 있는 객체의 크기
- 데이터베이스, 파일, 레코드, 필드 등
- 로킹 단위가 크면 로크 수가 작아 관리하기 쉽지만 병행성 수준이 낮아진다.
- 로킹 단위가 작으면 로크 수가 많아 관리하기 복잡해 오버헤드가 증가하지만 병행성
  수준이 높아진다.
